# Smart MCP Server Configuration
# Edit this file to configure your database connection and LLM settings

# Server Mode: "database" or "api"
mode: "database"

# Database Configuration (Used when mode is "database")
database:
  # Connection string format:
  # SQLite: sqlite:///path/to/database.db
  # PostgreSQL: postgresql://user:password@localhost:5432/dbname
  # MySQL: mysql+pymysql://user:password@localhost:3306/dbname
  connection_string: "sqlite:///example.db"
  schema_cache_ttl: 3600
  max_rows: 1000

# API Configuration (Used when mode is "api")
api:
  # URL or local path to OpenAPI/Swagger spec (JSON or YAML)
  spec_source: "https://petstore.swagger.io/v2/swagger.json"

  # Allow non-GET requests (POST, PUT, DELETE)
  # WARNING: Enabling this allows the LLM to modify data!
  unsafe_mode: false

  # Authentication
  auth:
    # Type: "none", "bearer", "api_key"
    type: "none"

    # For Bearer Token
    # Use $VAR_NAME to reference environment variable
    token: "$API_BEARER_TOKEN"

    # For API Key
    key: "$API_KEY"
    key_name: "X-API-Key" # Header name or query param name
    location: "header"    # "header" or "query"

# LLM Configuration
llm:
  provider: "openwebui"
  api_base: "http://localhost:8080/api"
  api_key_env: "LLM_API_KEY"
  model: "llama3.1:latest"
  temperature: 0.0
  max_tokens: 500

# Safety Configuration (Database specific)
safety:
  read_only: true
  allowed_commands:
    - "SELECT"
  blocked_keywords:
    - "DROP"
    - "TRUNCATE"
    - "ALTER"
    - "CREATE"
    - "GRANT"
    - "REVOKE"

# Security Configuration
security:
  hide_database_details: true
  expose_sql: false
  expose_column_names: false
  expose_table_names: false
  log_detailed_errors: true

# MCP Server Configuration
server:
  name: "smart-mcp-server"
  version: "1.0.0"
  description: "Intelligent Interface for Database and API"
  enable_schema_endpoint: true
  enable_examples_endpoint: true
  log_level: "INFO"
