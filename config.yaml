# Smart MCP Server Configuration
# Edit this file to configure your database connection and LLM settings

# Database Configuration
database:
  # Connection string format:
  # SQLite: sqlite:///path/to/database.db
  # PostgreSQL: postgresql://user:password@localhost:5432/dbname
  # MySQL: mysql+pymysql://user:password@localhost:3306/dbname
  # SQL Server: mssql+pyodbc://user:password@localhost/dbname?driver=ODBC+Driver+17+for+SQL+Server
  # Oracle: oracle+cx_oracle://user:password@localhost:1521/dbname
  connection_string: "sqlite:///example.db"
  
  # Schema refresh interval in seconds (0 = manual refresh only)
  schema_cache_ttl: 3600
  
  # Maximum rows to return in a single query (safety limit)
  max_rows: 1000

# Database Documentation (IMPROVES QUERY QUALITY!)
# Providing context helps the LLM understand your data and generate better SQL
database_context:
  # General description of what this database contains
  description: "E-commerce database containing customer orders and product information"
  
  # Domain/Industry (helps LLM understand terminology)
  domain: "E-commerce / Retail"
  
  # Key business concepts (helps LLM understand relationships)
  business_concepts:
    - "Customers place orders for products"
    - "Products belong to categories"
    - "Orders contain multiple items"
    - "Each order has a total amount and status"
  
  # Table descriptions (what each table represents)
  tables:
    customers:
      description: "Customer accounts and contact information"
      notes: "Contains both active and inactive customers"
      
    products:
      description: "Product catalog with pricing and inventory"
      notes: "Prices are in USD, stock_quantity shows available inventory"
      
    orders:
      description: "Customer purchase orders"
      notes: "Status can be: pending, completed, shipped, cancelled"
      
    order_items:
      description: "Individual items within each order"
      notes: "Links orders to products with quantity and price at time of purchase"
      
    categories:
      description: "Product categories for organization"
      notes: "Used to group related products"
  
  # Common queries/use cases (helps LLM understand typical questions)
  common_queries:
    - "Find top selling products"
    - "Calculate total revenue by time period"
    - "Identify inactive customers"
    - "Track order status and fulfillment"
    - "Analyze product category performance"
  
  # Data conventions (helps LLM interpret data correctly)
  conventions:
    dates: "All dates in YYYY-MM-DD format"
    currency: "Prices and amounts in USD"
    status_values: "Lowercase (e.g., 'completed', 'pending')"
    null_handling: "NULL indicates missing or not applicable"

# LLM Configuration for Natural Language to SQL
llm:
  # Provider: "openai", "openwebui", "anthropic", "custom"
  provider: "openwebui"
  
  # API Base URL (for OpenWebUI or custom endpoints)
  # OpenWebUI example: http://localhost:8080/api
  # OpenAI: https://api.openai.com/v1
  api_base: "http://localhost:8080/api"
  
  # API Key (stored in .env file as LLM_API_KEY)
  # This is loaded from environment variable for security
  api_key_env: "LLM_API_KEY"
  
  # Model name (e.g., "gpt-4", "gpt-3.5-turbo", "llama3", etc.)
  model: "llama3.1:latest"
  
  # Temperature (0.0 = deterministic, 1.0 = creative)
  temperature: 0.0
  
  # Maximum tokens for response
  max_tokens: 500

# Safety Configuration
safety:
  # Allow only SELECT queries (recommended: true)
  read_only: true
  
  # Allow these SQL commands (only used if read_only is false)
  allowed_commands:
    - "SELECT"
    # Uncomment to allow modifications (USE WITH CAUTION!)
    # - "INSERT"
    # - "UPDATE"
    # - "DELETE"
  
  # Blocked keywords (always forbidden)
  blocked_keywords:
    - "DROP"
    - "TRUNCATE"
    - "ALTER"
    - "CREATE"
    - "GRANT"
    - "REVOKE"

# Security Configuration
security:
  # Hide database structure from end users (PRODUCTION: true)
  # When true: Generic error messages, no column names, no SQL exposed
  # When false: Detailed errors for debugging (DEVELOPMENT ONLY)
  hide_database_details: true
  
  # Show SQL queries in responses (PRODUCTION: false)
  expose_sql: false
  
  # Show column names in errors (PRODUCTION: false)
  expose_column_names: false
  
  # Show table names in errors (PRODUCTION: false)
  expose_table_names: false
  
  # Log detailed errors server-side (always recommended: true)
  log_detailed_errors: true

# MCP Server Configuration
server:
  name: "smart-mcp-server"
  version: "1.0.0"
  description: "Intelligent SQL database interface with natural language support"
  
  # Enable additional endpoints
  enable_schema_endpoint: true
  enable_examples_endpoint: true
  
  # Logging level: DEBUG, INFO, WARNING, ERROR
  log_level: "INFO"

